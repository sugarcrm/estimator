<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- styles -->
    <link href="assets/css/bootstrap.css" rel="stylesheet">
    <link href="assets/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="assets/css/application.css" rel="stylesheet">
  </head>
  <body>
    <section id="sugarcrm" class="container">
    </section>

    <script type="text/html" id="template-sugarcrm">
      <div class="row">
        <div class="span12">
          <div class="row">
            <!-- Parameters -->
            <div class="span8">
              <div id="parameters"></div>
            </div>
            <!-- Calculations -->
            <div class="span4">
              <div id="calculations"></div>
            </div>  
          </div>

          <div class="row">
            <div class="span12">
              <!-- Topology -->
              <div id="topology"></div>
            </div>
          </div>

        </div>
      </div>
    </script>
    <script type="text/html" id="template-parameters">
    <div class="page-header">
      <h2>Parameters</h2>
    </div>

    <div class="row">
      <div class="span2">
        <label class="text">Licensed Users</label>
        <div class="input-append">
          <input id="users" class="calculateable input-small" size="4" type="text" value=<%= users %>><span class="add-on"><i class="icon-user"></i></span>
        </div>
      </div>
      <div class="span2">
        <label class="text">Concurrency</label>
        <div class="input-append">
          <input id="concurrency" class="calculateable input-small" size="4" type="text" value=<%= concurrency %>><span class="add-on">%</span>
        </div>
      </div> 

      <div class="span2">
        <label class="text">Database Records</label>
        <div class="input-append">
          <input id="records" class="calculateable input-small" size="4" type="text" value=<%= records %>><span class="add-on"><i class="icon-folder-close"></i></span>
        </div>
      </div>

      <div class="span2">
        <label>Environment</label>
        <select id="environment" class="calculateable input-small">
          <%= environments %>
        </select>
      </div>
    <!--  
      <div class="span2">
        <label>Operating System</label>
        <select id="operatingSystem" class="calculateable input-small">
          <option>Linux</option>
          <option>Windows</option>
        </select>
      </div>
      <div class="span2">
        <label>Web Server</label>
        <select id="webServer" class="calculateable input-small">
          <option>Apache</option>
          <option>IIS</option>
        </select>
      </div>
      <div class="span2">
        <label>Database</label>
        <select id="dbServer" class="calculateable input-small">
          <option>MySQL</option>
          <option>Microsoft</option>
          <option>Oracle</option>
          <option>DB2</option>
        </select>
      </div>
      <div class="span2">
        <label>PHP Version</label>
        <select id="dbServer" class="calculateable input-small">
          <option>5.2</option>
          <option>5.3</option>
        </select>
      </div>
      -->
    </div>

    <div class="row">
      <div class="span8">
        <table class="table table-striped">
          <thead>
            <tr>
              <th>Enabled</th>
              <th>Solution</th>
              <th>Web Requests / User</th>
              <th>API Requests / User</th>
              <th>DB Read/Write</th>
            </tr>
          </thead>
          <tbody>
            <%= solution_matrix %>
          </tbody>
        </table>
      </div>
    </div>
    </script>
    <script type="text/html" id="template-calculations">
      <div class="page-header">
        <h2>Calculations</h2>                
      </div>
      <div class="row">
        <div class="span2">
          <label class="text">
            Concurrent Users
          </label>
          <p id="concurrentUsers" class="calculation">
            <i class="icon-user"></i>
            <%= concurrent_users %> users
          </p>
        </div>
        <div class="span2">
          <label class="text">
            Throughput
          </label>
          <p id="reqsPerSec" class="calculation">
            <i class="icon-comment"></i>
            <%= requests_per_second %> req/sec
          </p>
        </div>
        <div class="span2">
          <label class="text">
            Peak Bandwidth
          </label>
          <p id="peakBandwidth" class="calculation">
            <i class="icon-signal"></i>
            <%= peak_bandwidth %> Mb/sec
          </p>
        </div>
        <div class="span2">
          <label class="text">
            Total Bandwidth
          </label>
          <p id="monthlyBandwidth" class="calculation">
            <i class="icon-signal"></i>
            <%= monthly_bandwidth %> GB/month
          </p>
        </div>
        
        <hr />
        <div class="span2">
          <label class="text">
            Web CPU
          </label>
          <p id="webCpu" class="calculation">
            <i class="icon-hdd"></i>
            <%= web_cpu %> GHz
          </p>
        </div>
        <div class="span2">
          <label class="text">
            Web RAM
          </label>
          <p id="webRam" class="calculation">
            <i class="icon-file"></i>
            <%= web_ram %> GB
          </p>
        </div>
        <div class="span2">
          <label class="text">
            DB CPU
          </label>
          <p id="dbCpu" class="calculation">
            <i class="icon-hdd"></i>
            <%= db_cpu %> GHz
          </p>
        </div>
        <div class="span2">
          <label class="text">
            DB RAM
          </label>
          <p id="dbRam" class="calculation">
            <i class="icon-file"></i>
            <%= db_ram %> GB
          </p>
        </div>
        <div class="span2">
          <label class="text">
            DB Size
          </label>
          <p id="dbSize" class="calculation">
            <i class="icon-briefcase"></i>
            <%= db_size %> GB
          </p>
        </div>
        <div class="span2">
          <label class="text">
            DB Buffer Pool Size
          </label>
          <p id="dbBufferPool" class="calculation">
            <i class="icon-tasks"></i>
            <%= db_buffer_pool %> GB
          </p>
        </div>
        <div class="span2">
          <label class="text">
            DB IOPS
          </label>
          <p id="dbIops" class="calculation">
            <i class="icon-tasks"></i>
            <%= db_iops %> IOPS
          </p>
        </div>
        <div class="span2">
          <label class="text">
            DB Disks
          </label>
          <p id="dbDisks" class="calculation">
            <i class="icon-tasks"></i>
            <%= db_disks %> disks
          </p>
        </div>
      </div>
    </script>
    <script type="text/html" id="template-topology">
      <div class="page-header">
        <h2>Runtime Environment</h2>
      </div>
      <div class="span5">
        <h3>Web Servers</h3>
        <div id="web-servers">
          <table class="table table-condensed table-striped table-bordered">
            <thead>
              <tr>
                <th>Name</th>
                <th>Make/Model</th>
                <th>CPU</th>
                <th>RAM</th>
                <th>Storage</th>
                <th>Price</th>
              </tr>
            </thead>
            <tbody>
              <%= web_servers %>
            </tbody>
          </table>
        </div>


      </div>
      <div class="span5">
        <h3>Database Servers</h3>
        
      </div>
      
    </script>
    <script type="text/html" id="template-solution-row">
      <tr>
        <td><input id="<%= id %>" class="solutions calculateable" type="checkbox"></td>
        <td><%= name %></td>
        <td><span id="<%= id %>_web_rps" class="web_rps"><%= web %></span> req/sec</td>
        <td><span id="<%= id %>_api_rps" class="api_rps"><%= api %></span> req/sec</td>
        <td><span id="<%= id %>_db_rw"   class="db_rw"><%= db.read %>:<%= db.write %></span> r/w ratio</td>
      </tr>
    </script>
    <script type="text/html" id="template-server-row">
      <tr>
        <td><%= name %></td>
        <td><%= make + " " + model %></td>
        <td><%= cpu.cores + " x " + cpu.clock %> GHz</td>
        <td><%= ram %> GB</td>
        <td><%= _.reduce(storage, function(h, s){ return h + s.quantity + " x " + s.size + "GB" }, '') %></td>
        <td>$ <%= price %></td>
      </tr>
    </script>
    <!-- javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="assets/js/vendor/jquery.js"></script>
    <script src="assets/js/vendor/jquery-priceformat.js"></script>
    <script src="assets/js/vendor/bootstrap.js"></script>
    <script src="assets/js/vendor/underscore.js"></script>
    <script src="assets/js/vendor/backbone.js"></script>
    <script src="assets/js/vendor/backbone-localstorage.js"></script>
    <script src="assets/js/sugarcrm.js"></script>
    <script src="assets/js/models/operating_systems.js"></script>
    <script src="assets/js/models/environments.js"></script>
    <script src="assets/js/models/solutions.js"></script>
    <script src="assets/js/models/parameters.js"></script>
    <script src="assets/js/models/servers.js"></script>
    <script src="assets/js/views/parameters.js"></script>
    <script src="assets/js/views/calculator.js"></script>
    <script src="assets/js/views/topology.js"></script>
    <script src="assets/js/application.js"></script>
    
  </body>
</html>